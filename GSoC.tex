% main.tex
\documentclass[a4paper,12pt,onecolumn]{article}
\input{packages.tex}
\author{Yingbo Ma}
\title{Native Julia Solvers for Ordinary Differential Equations Boundary Value Problem: A GSoC proposal}

\begin{document}
\nocite{*}
\maketitle
\maketitle
\tableofcontents

% \section{Synopsis} % (fold)
% \label{sec:synopsis}

% % section synopsis (end)

\section{The Project} % (fold)
\label{sec:the_project}

\subsection{Basic concepts for nonexperts} % (fold)
\label{sub:basic_concepts_for_nonexperts}
An ordinary differential equation (ODE)  is an equality relationship between a function $y(x)$
and its derivatives, and an $n$th order ODE can be written as

\[F(x, y, y', \cdots, y^{(n)}) = 0\].

Physics and engineering often present ODE problems. Many physics phenomena in physics can be reduced into an ODE. Newton's second law of motion, namely $F=ma$ can be rewritten into an ODE as $m\frac{d^2x}{dt^2}
=F(x)$, since $a$ can depend on time. ODEs can be very difficult to solve. There are many case in which an ODE does not have an analytical solution. Therefore, numerical methods need to be used to solve
ODEs, by approximating the solution. There are two kinds of problems in ODE. One is initial
value problem (IVP) and the other is boundary value problem (BVP). For instance, the ODE
\[m\frac{d^2x}{dt^2} = -kx(t)\]
describes the motion for a harmonic oscillator. If the initial position $x_0$ and initial velocity
$\frac{dx_0}{dt}$ is known, then it is an IVP problem. If the condition at the ``boundary'' is know,
for instance, initial position $x_0$ and final position $x_1$, then it is a BVP problem. The solvers
that I am going to work on with solvers for BVP problem.
% subsection basic_concepts_for_nonexperts (end)

\subsubsection{Introduction} % (fold)
\label{ssub:introduction}
The project that I propose to work on in Google's Summer of Code project is the native Julia
implementation of some BVP solving methods for ODE, namely, collocation method and shooting method.
% subsubsection introduction (end)

\subsection{Project Goals}
\subsubsection{Goal 1: Implement BVP related data structure}
A data structure to describe the BVP problem, namely, ``BVProblem''. It contains the information

\begin{align*}
	&F(x, y, y', \cdots, y^{(n)}) = 0 \\
	&\text{domin: }x \in [a, b] \\
	&\text{boundary condition: Dirichlet, Neumann, Robin}.
\end{align*}

It can be defined by

\[\text{prob} = \text{BVProblem}(f,domin,bc)\].

\begin{lstlisting}[mathescape=true]
abstract AbstractBVProblem{dType,bType,isinplace,F} <: DEProblem

type BVProblem{dType,bType,initType,F} <: AbstractBVProblem{dType,bType,F}
  f::F
  domin::dType
  bc::bType
  init::initType
end

function BVProblem(f,domin,bc,init=nothing)
  BVProblem{eltype(domin),eltype(bc),eltype(init),typeof(f)}(f,domin,bc,init)
end

\end{lstlisting}


\subsubsection{Goal 2: Implement shooting method}
The shooting method is a method that convert a BVP problem into an IVP problem and a root finding
problem. Generally, the shooting method is efficient in simple problems, because it does not need
a discretization matrix. This is no memory overhead. The drawback is that even if the BVP problem
is well-conditioned, the root finding problem that the BVP converted to can be ill-conditioned.
Therefore, a more robust method like the collocation method is also need, despite shooting method
is easy to implement.

This is the my current implementation of the shooting method. I will work on to generalize it later,
e.g. let user has the ability to input a ODE solver and a minimization algorithm.

\begin{lstlisting}[mathescape=true]
function solve(prob::BVProblem; OptSolver=LBFGS())
  bc = prob.bc
  u0 = bc[1]
  len = length(bc[1])
  probIt = ODEProblem(prob.f, u0, prob.domin)
  function loss(minimizer)
    probIt.u0 = minimizer
    sol = DifferentialEquations.solve(probIt)
    norm(sol[end]-bc[2])
  end
  opt = optimize(loss, u0, OptSolver)
  probIt.u0 = opt.minimizer
  @show opt.minimum
  DifferentialEquations.solve(probIt)
end
\end{lstlisting}

\subsubsection{Goal 3: Implement collocation method}
The collocation method is the idea that a solution $y(x)$ of a ODE $F(x, y, y', \cdots, y^{(n)}) = 0$
can be approximated by a linear combination of basis functions.

\[y(x) \approx \hat{y}(x) = \phi_0 + \sum_{i=1}^na_i\phi_i(x)\]

And the residual $R(x,a)$ can be written as

\[F(x, \hat{y}(x), \hat{y'}(x), \cdots, \hat{y}^{(n)}(x)) = R(x,a)\].

Collocation method forces the residual $R(x,a)$ to be $0$ for $n$ collocation points.
There are different discretization methods in collocation method, and I am going to work on
Simpson discretization, Gauss discretization, Radau discretization, and Labatto
discretization this summer.

\subsection{Stretch Goals and Future Directions}
The stretch goals for this summer would be add tests for collection method and shooting method, to
make general recommendation for helping users to choose solvers.

\subsection{Timeline}
\paragraph{Pre-GSoC} % (fold)
\label{par:pre_gsoc}
Unfortunately, I have to work on function of matrix (a.k.a. matrix function) in Julia Lab.
I don't have much time to work on the GSoC project until it starts.
% paragraph pre_gsoc (end)

\paragraph{Community Bonding: May 5 (Start) - May 30} % (fold)
\label{par:community_bonding}
\begin{itemize}
	\item Learn more about Julia's type system and the coding style in \textit{JuliaDiffEq}.
	\item Get proficient in Git version control system.
	\item Learn more about the collocation method and optimization methods that will be
	used in the shooting method.
	\item Send a PR.
\end{itemize}
% paragraph community_bonding (end)

\paragraph{Shooting Method: May 30 - June 15} % (fold)
\label{par:shooting_method_may_30_june_15}
\begin{itemize}
	\item Design a general framework for BVP problems. (e.g. \textit{BVProblem} and \textit{
	BoundaryCondition} data structure.)
	\item Generalize shooting method.
	\item Test shooting method with some simple problems with analytical solutions.
	\item Learn more deeply about collocation methods.
	\item Send a PR.
\end{itemize}
% paragraph shooting_method_may_30_june_15 (end)

\paragraph{Discretization Algorithms: June 15 - July 10} % (fold)
\label{par:discretization_algorithms}
\begin{itemize}
	\item Design a basic framework for different types of discretization for solving
	BVP problems.
	\item Implement different kinds of discretization algorithms for collection methods.
	\item Optimize those discretization algorithms that are implemented with \textit{SIMD}
	and some other techniques.
	\item Send a PR.
\end{itemize}
% paragraph discretization_algorithms (end)

\paragraph{Least Squares Collocation Method: July 10 - July 31} % (fold)
\label{par:least_squares_method_july_10_july_31}
\begin{itemize}
	\item Implement the least squares collocation method.
	\item Add more sophisticated testing BVP problems to test against the least squares
	collocation method.
	\item Optimize the least squares collocation method.
	\item Send a PR.
\end{itemize}
% paragraph least_squares_method_july_10_july_31 (end)

\paragraph{Weighted Residual Method: July 31 - August 15} % (fold)
\label{par:weighted_residual_method_july_31_august_15}
\begin{itemize}
	\item Implement the weighted residual method.
	\item Test weighted residual method, and add more tests to test against the weighted
	residual method.
	\item Optimize the weighted residual method.
	\item Send a PR.
\end{itemize}
% paragraph weighted_residual_method_july_31_august_15 (end)

\paragraph{Documentation \& Review \& Stretch Goals: August 15 - August 29 (End)} % (fold)
\label{par:review_&_stretch_goals_august_15_august_29}
\begin{itemize}
	\item Write a documentation page for the BVP solvers that I have written.
	\item Start to work on the Stretch Goals.
	\item Send a PR.
	\item Review and test all the code that I have written in GSoC project.
\end{itemize}
% paragraph review_&_stretch_goals_august_15_august_29 (end)

\subsection{Potential Hurdles} % (fold)
\label{sub:potential_hurdles}
The potential hurdles I see are mostly because I have not worked in a big project like
this before, and I may use some effort to be familiar with the coding style in \textit{JuliaDiffEq}
organization. I need to be proficient with Git. I also need to be more fluent in Julia's
type system. I used to work in linear algebra which does not require much familiarity
about the software engineering side.
% subsection potential_hurdles (end)

\subsection{Mentor} % (fold)
\label{sub:mentor}
My mentor will be Christopher Rackauckas.
% subsection mentor (end)

% section the_project (end)


\subsection{Julia Coding Demo} % (fold)
\label{ssub:julia_coding_demo}
Here are my code my in Julia.

\url{https://github.com/JuliaDiffEq/BoundaryValueDiffEq.jl}

\url{https://github.com/obiajulu/ODE.jl/tree/radau} Worked with with Joseph Obiajulu.

\url{https://github.com/YingboMa/BVP.jl}

\url{https://github.com/YingboMa/Funm.jl}
% subsection julia_coding_demo (end)

\subsection{About me} % (fold)
\label{ssub:about_me}
My name is Yingbo Ma, and I am currently a senior in Lexington Public High School. I got admitted by
University of California, Irvine (UCI). I am interested in mathematics and physics and willing to
learn new things about them. I worked with Joseph Obiajulu on \textit{ODE.jl} last summer in MIT
Julia Lab. I still go to Julia Lab regularly now. I am working on fixing the \textit{logm} function
in Julia base.
% subsection about_me (end)

\subsection{Contact Information} % (fold)
\label{ssub:contact_information}
\paragraph{Email:} mayingbo5@gmail.com

\paragraph{GitHub:} YingboMa

% subsection contact_information (end)

\section{Summer Logistics} % (fold)
\label{sec:summer_logistics}

\paragraph{Work hours:} I expect to be able to work over 35 hours per week though this summer.
I do not have much other thing to do besides working in this project, so I can put most of my
attention in this project. Over all I am able to put 400-500 hours into this project.

% section summer_logistics (end)

% Citations
\bibliographystyle{unsrt}
\bibliography{cite}
\end{document}